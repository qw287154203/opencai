!function(){var o=Math,t=function(o){return o>>0},r=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",e=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion),l=/playbook/gi.test(navigator.appVersion),i=/hp-tablet/gi.test(navigator.appVersion),s="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!i,c=r+"Transform"in document.documentElement.style,p=n||l,m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){return setTimeout(o,1)},h=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,u="onorientationchange"in window?"orientationchange":"resize",S=a?"touchstart":"mousedown",d=a?"touchmove":"mousemove",b=a?"touchend":"mouseup",f=a?"touchcancel":"mouseup",x="Moz"==r?"DOMMouseScroll":"mousewheel",g="translate"+(s?"3d(":"("),y=s?",0)":")",T=function(o,t){var l,i=this,m=document;i.wrapper="object"==typeof o?o:m.getElementById(o),i.wrapper.style.overflow="hidden",i.scroller=i.wrapper.children[0],i.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:e,hideScrollbar:n,fadeScrollbar:n&&s,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(o){o.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in t)i.options[l]=t[l];i.x=i.options.x,i.y=i.options.y,i.options.useTransform=!!c&&i.options.useTransform,i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar,i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar,i.options.zoom=i.options.useTransform&&i.options.zoom,i.options.useTransition=p&&i.options.useTransition,i.options.zoom&&e&&(g="translate(",y=")"),i.scroller.style[r+"TransitionProperty"]=i.options.useTransform?"-"+r.toLowerCase()+"-transform":"top left",i.scroller.style[r+"TransitionDuration"]="0",i.scroller.style[r+"TransformOrigin"]="0 0",i.options.useTransition&&(i.scroller.style[r+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),i.options.useTransform?i.scroller.style[r+"Transform"]=g+i.x+"px,"+i.y+"px"+y:i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px",i.options.useTransition&&(i.options.fixedScrollbar=!0),i.refresh(),i._bind(u,window),i._bind(S),a||(i._bind("mouseout",i.wrapper),"none"!=i.options.wheelAction&&i._bind(x)),i.options.checkDOMChanges&&(i.checkDOMTime=setInterval(function(){i._checkDOMChanges()},500))};T.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(o){var t=this;switch(o.type){case S:if(!a&&0!==o.button)return;t._start(o);break;case d:t._move(o);break;case b:case f:t._end(o);break;case u:t._resize();break;case x:t._wheel(o);break;case"mouseout":t._mouseout(o);break;case"webkitTransitionEnd":t._transitionEnd(o)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(e){var n,l=this,i=document;l[e+"Scrollbar"]?(l[e+"ScrollbarWrapper"]||(n=i.createElement("div"),l.options.scrollbarClass?n.className=l.options.scrollbarClass+e.toUpperCase():n.style.cssText="position:absolute;z-index:100;"+("h"==e?"height:7px;bottom:1px;left:2px;right:"+(l.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(l.hScrollbar?"7":"2")+"px;top:2px;right:1px"),n.style.cssText+=";pointer-events:none;-"+r+"-transition-property:opacity;-"+r+"-transition-duration:"+(l.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(l.options.hideScrollbar?"0":"1"),l.wrapper.appendChild(n),l[e+"ScrollbarWrapper"]=n,n=i.createElement("div"),l.options.scrollbarClass||(n.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+r+"-background-clip:padding-box;-"+r+"-box-sizing:border-box;"+("h"==e?"height:100%":"width:100%")+";-"+r+"-border-radius:3px;border-radius:3px"),n.style.cssText+=";pointer-events:none;-"+r+"-transition-property:-"+r+"-transform;-"+r+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+r+"-transition-duration:0;-"+r+"-transform:"+g+"0,0"+y,l.options.useTransition&&(n.style.cssText+=";-"+r+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),l[e+"ScrollbarWrapper"].appendChild(n),l[e+"ScrollbarIndicator"]=n),"h"==e?(l.hScrollbarSize=l.hScrollbarWrapper.clientWidth,l.hScrollbarIndicatorSize=o.max(t(l.hScrollbarSize*l.hScrollbarSize/l.scrollerW),8),l.hScrollbarIndicator.style.width=l.hScrollbarIndicatorSize+"px",l.hScrollbarMaxScroll=l.hScrollbarSize-l.hScrollbarIndicatorSize,l.hScrollbarProp=l.hScrollbarMaxScroll/l.maxScrollX):(l.vScrollbarSize=l.vScrollbarWrapper.clientHeight,l.vScrollbarIndicatorSize=o.max(t(l.vScrollbarSize*l.vScrollbarSize/l.scrollerH),8),l.vScrollbarIndicator.style.height=l.vScrollbarIndicatorSize+"px",l.vScrollbarMaxScroll=l.vScrollbarSize-l.vScrollbarIndicatorSize,l.vScrollbarProp=l.vScrollbarMaxScroll/l.maxScrollY),l._scrollbarPos(e,!0)):l[e+"ScrollbarWrapper"]&&(c&&(l[e+"ScrollbarIndicator"].style[r+"Transform"]=""),l[e+"ScrollbarWrapper"].parentNode.removeChild(l[e+"ScrollbarWrapper"]),l[e+"ScrollbarWrapper"]=null,l[e+"ScrollbarIndicator"]=null)},_resize:function(){var o=this;setTimeout(function(){o.refresh()},e?200:0)},_pos:function(o,e){o=this.hScroll?o:0,e=this.vScroll?e:0,this.options.useTransform?this.scroller.style[r+"Transform"]=g+o+"px,"+e+"px"+y+" scale("+this.scale+")":(o=t(o),e=t(e),this.scroller.style.left=o+"px",this.scroller.style.top=e+"px"),this.x=o,this.y=e,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(o,e){var n,l=this,i="h"==o?l.x:l.y;l[o+"Scrollbar"]&&((i=l[o+"ScrollbarProp"]*i)<0?(l.options.fixedScrollbar||((n=l[o+"ScrollbarIndicatorSize"]+t(3*i))<8&&(n=8),l[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=n+"px"),i=0):i>l[o+"ScrollbarMaxScroll"]&&(l.options.fixedScrollbar?i=l[o+"ScrollbarMaxScroll"]:((n=l[o+"ScrollbarIndicatorSize"]-t(3*(i-l[o+"ScrollbarMaxScroll"])))<8&&(n=8),l[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=n+"px",i=l[o+"ScrollbarMaxScroll"]+(l[o+"ScrollbarIndicatorSize"]-n))),l[o+"ScrollbarWrapper"].style[r+"TransitionDelay"]="0",l[o+"ScrollbarWrapper"].style.opacity=e&&l.options.hideScrollbar?"0":"1",l[o+"ScrollbarIndicator"].style[r+"Transform"]=g+("h"==o?i+"px,0":"0,"+i+"px")+y)},_start:function(t){var e,n,l,i,s,c=this,p=a?t.touches[0]:t;c.enabled&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,t),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&a&&t.touches.length>1&&(i=o.abs(t.touches[0].pageX-t.touches[1].pageX),s=o.abs(t.touches[0].pageY-t.touches[1].pageY),c.touchesDistStart=o.sqrt(i*i+s*s),c.originX=o.abs(t.touches[0].pageX+t.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=o.abs(t.touches[0].pageY+t.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,t)),c.options.momentum&&(c.options.useTransform?(n=1*(e=getComputedStyle(c.scroller,null)[r+"Transform"].replace(/[^0-9-.,]/g,"").split(","))[4],l=1*e[5]):(n=1*getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),l=1*getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),n==c.x&&l==c.y||(c.options.useTransition?c._unbind("webkitTransitionEnd"):h(c.aniTime),c.steps=[],c._pos(n,l))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=p.pageX,c.pointY=p.pageY,c.startTime=t.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,t),c._bind(d),c._bind(b),c._bind(f))},_move:function(t){var e,n,l,i=this,s=a?t.touches[0]:t,c=s.pageX-i.pointX,p=s.pageY-i.pointY,m=i.x+c,h=i.y+p,u=t.timeStamp||Date.now();return i.options.onBeforeScrollMove&&i.options.onBeforeScrollMove.call(i,t),i.options.zoom&&a&&t.touches.length>1?(e=o.abs(t.touches[0].pageX-t.touches[1].pageX),n=o.abs(t.touches[0].pageY-t.touches[1].pageY),i.touchesDist=o.sqrt(e*e+n*n),i.zoomed=!0,(l=1/i.touchesDistStart*i.touchesDist*this.scale)<i.options.zoomMin?l=.5*i.options.zoomMin*Math.pow(2,l/i.options.zoomMin):l>i.options.zoomMax&&(l=2*i.options.zoomMax*Math.pow(.5,i.options.zoomMax/l)),i.lastScale=l/this.scale,m=this.originX-this.originX*i.lastScale+this.x,h=this.originY-this.originY*i.lastScale+this.y,this.scroller.style[r+"Transform"]=g+m+"px,"+h+"px"+y+" scale("+l+")",void(i.options.onZoom&&i.options.onZoom.call(i,t))):(i.pointX=s.pageX,i.pointY=s.pageY,(m>0||m<i.maxScrollX)&&(m=i.options.bounce?i.x+c/2:m>=0||i.maxScrollX>=0?0:i.maxScrollX),(h>i.minScrollY||h<i.maxScrollY)&&(h=i.options.bounce?i.y+p/2:h>=i.minScrollY||i.maxScrollY>=0?i.minScrollY:i.maxScrollY),i.absDistX<6&&i.absDistY<6?(i.distX+=c,i.distY+=p,i.absDistX=o.abs(i.distX),void(i.absDistY=o.abs(i.distY))):(i.options.lockDirection&&(i.absDistX>i.absDistY+5?(h=i.y,p=0):i.absDistY>i.absDistX+5&&(m=i.x,c=0)),i.moved=!0,i._pos(m,h),i.dirX=c>0?-1:c<0?1:0,i.dirY=p>0?-1:p<0?1:0,u-i.startTime>300&&(i.startTime=u,i.startX=i.x,i.startY=i.y),void(i.options.onScrollMove&&i.options.onScrollMove.call(i,t))))},_end:function(e){if(!a||0==e.touches.length){var n,l,i,s,c,p,m,h=this,u=a?e.changedTouches[0]:e,S={dist:0,time:0},x={dist:0,time:0},T=(e.timeStamp||Date.now())-h.startTime,w=h.x,v=h.y;if(h._unbind(d),h._unbind(b),h._unbind(f),h.options.onBeforeScrollEnd&&h.options.onBeforeScrollEnd.call(h,e),h.zoomed)return m=h.scale*h.lastScale,m=Math.max(h.options.zoomMin,m),m=Math.min(h.options.zoomMax,m),h.lastScale=m/h.scale,h.scale=m,h.x=h.originX-h.originX*h.lastScale+h.x,h.y=h.originY-h.originY*h.lastScale+h.y,h.scroller.style[r+"TransitionDuration"]="200ms",h.scroller.style[r+"Transform"]=g+h.x+"px,"+h.y+"px"+y+" scale("+h.scale+")",h.zoomed=!1,h.refresh(),void(h.options.onZoomEnd&&h.options.onZoomEnd.call(h,e));if(!h.moved)return a&&(h.doubleTapTimer&&h.options.zoom?(clearTimeout(h.doubleTapTimer),h.doubleTapTimer=null,h.options.onZoomStart&&h.options.onZoomStart.call(h,e),h.zoom(h.pointX,h.pointY,1==h.scale?h.options.doubleTapZoom:1),h.options.onZoomEnd&&setTimeout(function(){h.options.onZoomEnd.call(h,e)},200)):h.doubleTapTimer=setTimeout(function(){for(h.doubleTapTimer=null,n=u.target;1!=n.nodeType;)n=n.parentNode;"SELECT"!=n.tagName&&"INPUT"!=n.tagName&&"TEXTAREA"!=n.tagName&&((l=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e.view,1,u.screenX,u.screenY,u.clientX,u.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),l._fake=!0,n.dispatchEvent(l))},h.options.zoom?250:0)),h._resetPos(200),void(h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e));if(T<300&&h.options.momentum&&(S=w?h._momentum(w-h.startX,T,-h.x,h.scrollerW-h.wrapperW+h.x,h.options.bounce?h.wrapperW:0):S,x=v?h._momentum(v-h.startY,T,-h.y,h.maxScrollY<0?h.scrollerH-h.wrapperH+h.y-h.minScrollY:0,h.options.bounce?h.wrapperH:0):x,w=h.x+S.dist,v=h.y+x.dist,(h.x>0&&w>0||h.x<h.maxScrollX&&w<h.maxScrollX)&&(S={dist:0,time:0}),(h.y>h.minScrollY&&v>h.minScrollY||h.y<h.maxScrollY&&v<h.maxScrollY)&&(x={dist:0,time:0})),S.dist||x.dist)return c=o.max(o.max(S.time,x.time),10),h.options.snap&&(i=w-h.absStartX,s=v-h.absStartY,o.abs(i)<h.options.snapThreshold&&o.abs(s)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(w=(p=h._snap(w,v)).x,v=p.y,c=o.max(p.time,c))),h.scrollTo(t(w),t(v),c),void(h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e));if(h.options.snap)return i=w-h.absStartX,s=v-h.absStartY,o.abs(i)<h.options.snapThreshold&&o.abs(s)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(p=h._snap(h.x,h.y)).x==h.x&&p.y==h.y||h.scrollTo(p.x,p.y,p.time),void(h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e));h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,e)}},_resetPos:function(o){var t=this,e=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,n=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(e==t.x&&n==t.y)return t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==r&&(t.hScrollbarWrapper.style[r+"TransitionDelay"]="300ms"),t.hScrollbarWrapper.style.opacity="0"),void(t.vScrollbar&&t.options.hideScrollbar&&("webkit"==r&&(t.vScrollbarWrapper.style[r+"TransitionDelay"]="300ms"),t.vScrollbarWrapper.style.opacity="0"));t.scrollTo(e,n,o||0)},_wheel:function(o){var t,r,e,n,l,i=this;if("wheelDeltaX"in o?(t=o.wheelDeltaX/12,r=o.wheelDeltaY/12):t=r="detail"in o?3*-o.detail:-o.wheelDelta,"zoom"==i.options.wheelAction)return(l=i.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0)))<i.options.zoomMin&&(l=i.options.zoomMin),l>i.options.zoomMax&&(l=i.options.zoomMax),void(l!=i.scale&&(!i.wheelZoomCount&&i.options.onZoomStart&&i.options.onZoomStart.call(i,o),i.wheelZoomCount++,i.zoom(o.pageX,o.pageY,l,400),setTimeout(function(){i.wheelZoomCount--,!i.wheelZoomCount&&i.options.onZoomEnd&&i.options.onZoomEnd.call(i,o)},400)));e=i.x+t,n=i.y+r,e>0?e=0:e<i.maxScrollX&&(e=i.maxScrollX),n>i.minScrollY?n=i.minScrollY:n<i.maxScrollY&&(n=i.maxScrollY),i.scrollTo(e,n,0)},_mouseout:function(o){var t=o.relatedTarget;if(t){for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(o)}else this._end(o)},_transitionEnd:function(o){var t=this;o.target==t.scroller&&(t._unbind("webkitTransitionEnd"),t._startAni())},_startAni:function(){var t,r,e,n=this,l=n.x,i=n.y,s=Date.now();if(!n.animating)if(n.steps.length){if((t=n.steps.shift()).x==l&&t.y==i&&(t.time=0),n.animating=!0,n.moved=!0,n.options.useTransition)return n._transitionTime(t.time),n._pos(t.x,t.y),n.animating=!1,void(t.time?n._bind("webkitTransitionEnd"):n._resetPos(0));(e=function(){var a,c,p=Date.now();if(p>=s+t.time)return n._pos(t.x,t.y),n.animating=!1,n.options.onAnimationEnd&&n.options.onAnimationEnd.call(n),void n._startAni();p=(p-s)/t.time-1,r=o.sqrt(1-p*p),a=(t.x-l)*r+l,c=(t.y-i)*r+i,n._pos(a,c),n.animating&&(n.aniTime=m(e))})()}else n._resetPos(400)},_transitionTime:function(o){o+="ms",this.scroller.style[r+"TransitionDuration"]=o,this.hScrollbar&&(this.hScrollbarIndicator.style[r+"TransitionDuration"]=o),this.vScrollbar&&(this.vScrollbarIndicator.style[r+"TransitionDuration"]=o)},_momentum:function(r,e,n,l,i){var s=o.abs(r)/e,a=s*s/.0012,c=0;return r>0&&a>n?(s=s*(n+=i/(6/(a/s*6e-4)))/a,a=n):r<0&&a>l&&(s=s*(l+=i/(6/(a/s*6e-4)))/a,a=l),a*=r<0?-1:1,c=s/6e-4,{dist:a,time:t(c)}},_offset:function(o){for(var t=-o.offsetLeft,r=-o.offsetTop;o=o.offsetParent;)t-=o.offsetLeft,r-=o.offsetTop;return o!=this.wrapper&&(t*=this.scale,r*=this.scale),{left:t,top:r}},_snap:function(r,e){var n,l,i,s,a,c,p=this;for(i=p.pagesX.length-1,n=0,l=p.pagesX.length;n<l;n++)if(r>=p.pagesX[n]){i=n;break}for(i==p.currPageX&&i>0&&p.dirX<0&&i--,r=p.pagesX[i],a=(a=o.abs(r-p.pagesX[p.currPageX]))?o.abs(p.x-r)/a*500:0,p.currPageX=i,i=p.pagesY.length-1,n=0;n<i;n++)if(e>=p.pagesY[n]){i=n;break}return i==p.currPageY&&i>0&&p.dirY<0&&i--,e=p.pagesY[i],c=o.abs(e-p.pagesY[p.currPageY]),c=c?o.abs(p.y-e)/c*500:0,p.currPageY=i,s=t(o.max(a,c))||200,{x:r,y:e,time:s}},_bind:function(o,t,r){(t||this.scroller).addEventListener(o,this,!!r)},_unbind:function(o,t,r){(t||this.scroller).removeEventListener(o,this,!!r)},destroy:function(){var o=this;o.scroller.style[r+"Transform"]="",o.hScrollbar=!1,o.vScrollbar=!1,o._scrollbar("h"),o._scrollbar("v"),o._unbind(u,window),o._unbind(S),o._unbind(d),o._unbind(b),o._unbind(f),o.options.hasTouch||(o._unbind("mouseout",o.wrapper),o._unbind(x)),o.options.useTransition&&o._unbind("webkitTransitionEnd"),o.options.checkDOMChanges&&clearInterval(o.checkDOMTime),o.options.onDestroy&&o.options.onDestroy.call(o)},refresh:function(){var o,e,n,l,i=this,s=0,a=0;if(i.scale<i.options.zoomMin&&(i.scale=i.options.zoomMin),i.wrapperW=i.wrapper.clientWidth||1,i.wrapperH=i.wrapper.clientHeight||1,i.minScrollY=-i.options.topOffset||0,i.scrollerW=t(i.scroller.offsetWidth*i.scale),i.scrollerH=t((i.scroller.offsetHeight+i.minScrollY)*i.scale),i.maxScrollX=i.wrapperW-i.scrollerW,i.maxScrollY=i.wrapperH-i.scrollerH+i.minScrollY,i.dirX=0,i.dirY=0,i.options.onRefresh&&i.options.onRefresh.call(i),i.hScroll=i.options.hScroll&&i.maxScrollX<0,i.vScroll=i.options.vScroll&&(!i.options.bounceLock&&!i.hScroll||i.scrollerH>i.wrapperH),i.hScrollbar=i.hScroll&&i.options.hScrollbar,i.vScrollbar=i.vScroll&&i.options.vScrollbar&&i.scrollerH>i.wrapperH,o=i._offset(i.wrapper),i.wrapperOffsetLeft=-o.left,i.wrapperOffsetTop=-o.top,"string"==typeof i.options.snap)for(i.pagesX=[],i.pagesY=[],e=0,n=(l=i.scroller.querySelectorAll(i.options.snap)).length;e<n;e++)(s=i._offset(l[e])).left+=i.wrapperOffsetLeft,s.top+=i.wrapperOffsetTop,i.pagesX[e]=s.left<i.maxScrollX?i.maxScrollX:s.left*i.scale,i.pagesY[e]=s.top<i.maxScrollY?i.maxScrollY:s.top*i.scale;else if(i.options.snap){for(i.pagesX=[];s>=i.maxScrollX;)i.pagesX[a]=s,s-=i.wrapperW,a++;for(i.maxScrollX%i.wrapperW&&(i.pagesX[i.pagesX.length]=i.maxScrollX-i.pagesX[i.pagesX.length-1]+i.pagesX[i.pagesX.length-1]),s=0,a=0,i.pagesY=[];s>=i.maxScrollY;)i.pagesY[a]=s,s-=i.wrapperH,a++;i.maxScrollY%i.wrapperH&&(i.pagesY[i.pagesY.length]=i.maxScrollY-i.pagesY[i.pagesY.length-1]+i.pagesY[i.pagesY.length-1])}i._scrollbar("h"),i._scrollbar("v"),i.zoomed||(i.scroller.style[r+"TransitionDuration"]="0",i._resetPos(200))},scrollTo:function(o,t,r,e){var n,l,i=this,s=o;for(i.stop(),s.length||(s=[{x:o,y:t,time:r,relative:e}]),n=0,l=s.length;n<l;n++)s[n].relative&&(s[n].x=i.x-s[n].x,s[n].y=i.y-s[n].y),i.steps.push({x:s[n].x,y:s[n].y,time:s[n].time||0});i._startAni()},scrollToElement:function(t,r){var e,n=this;(t=t.nodeType?t:n.scroller.querySelector(t))&&((e=n._offset(t)).left+=n.wrapperOffsetLeft,e.top+=n.wrapperOffsetTop,e.left=e.left>0?0:e.left<n.maxScrollX?n.maxScrollX:e.left,e.top=e.top>n.minScrollY?n.minScrollY:e.top<n.maxScrollY?n.maxScrollY:e.top,r=void 0===r?o.max(2*o.abs(e.left),2*o.abs(e.top)):r,n.scrollTo(e.left,e.top,r))},scrollToPage:function(o,t,r){var e,n,l=this;r=void 0===r?400:r,l.options.onScrollStart&&l.options.onScrollStart.call(l),l.options.snap?(o="next"==o?l.currPageX+1:"prev"==o?l.currPageX-1:o,t="next"==t?l.currPageY+1:"prev"==t?l.currPageY-1:t,o=o<0?0:o>l.pagesX.length-1?l.pagesX.length-1:o,t=t<0?0:t>l.pagesY.length-1?l.pagesY.length-1:t,l.currPageX=o,l.currPageY=t,e=l.pagesX[o],n=l.pagesY[t]):(e=-l.wrapperW*o,n=-l.wrapperH*t,e<l.maxScrollX&&(e=l.maxScrollX),n<l.maxScrollY&&(n=l.maxScrollY)),l.scrollTo(e,n,r)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(d),this._unbind(b),this._unbind(f)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):h(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(o,t,e,n){var l=this,i=e/l.scale;l.options.useTransform&&(l.zoomed=!0,n=void 0===n?200:n,o=o-l.wrapperOffsetLeft-l.x,t=t-l.wrapperOffsetTop-l.y,l.x=o-o*i+l.x,l.y=t-t*i+l.y,l.scale=e,l.refresh(),l.x=l.x>0?0:l.x<l.maxScrollX?l.maxScrollX:l.x,l.y=l.y>l.minScrollY?l.minScrollY:l.y<l.maxScrollY?l.maxScrollY:l.y,l.scroller.style[r+"TransitionDuration"]=n+"ms",l.scroller.style[r+"Transform"]=g+l.x+"px,"+l.y+"px"+y+" scale("+e+")",l.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},"undefined"!=typeof exports?exports.iScroll=T:window.iScroll=T}();